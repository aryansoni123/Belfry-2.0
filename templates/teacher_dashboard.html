{% extends "base.html" %}

{% block title %}Teacher Dashboard - Belfry{% endblock %}

{% block content %}
<div class="mb-8 flex justify-between items-center">
    <div>
        <h1 class="text-4xl font-bold text-gray-900 mb-2">Teacher Dashboard</h1>
        <p class="text-gray-600">Manage your coding quizzes and assessments</p>
    </div>
    <a href="{{ url_for('teacher.create_quiz') }}" 
       class="btn-primary">
        + Create New Quiz
    </a>
</div>

{% if quiz_stats %}
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {% for stat in quiz_stats %}
        <div class="card p-6">
            <h2 class="text-xl font-bold text-gray-900 mb-3">{{ stat.quiz.title }}</h2>
            <p class="text-gray-600 text-sm mb-4 line-clamp-2 leading-relaxed">{{ stat.quiz.description or stat.quiz.problem_statement[:100] }}...</p>
            
            <div class="space-y-2 mb-4">
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-600">Submissions:</span>
                    <span class="font-semibold text-gray-900">{{ stat.total_submissions }}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-600">Passed:</span>
                    <span class="font-semibold text-green-600">{{ stat.passed_submissions }}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-600">Failed:</span>
                    <span class="font-semibold text-red-600">{{ stat.total_submissions - stat.passed_submissions }}</span>
                </div>
            </div>
            
            <div class="flex space-x-2 mt-4">
                <a href="{{ url_for('teacher.view_quiz', quiz_id=stat.quiz.id) }}" 
                   class="flex-1 btn-secondary text-center py-2.5 px-4 rounded-lg transition">
                    View
                </a>
                <a href="{{ url_for('teacher.edit_quiz', quiz_id=stat.quiz.id) }}" 
                   class="flex-1 btn-primary text-center py-2.5 px-4 rounded-lg transition">
                    Edit
                </a>
            </div>
            
            <div class="mt-4 text-xs text-gray-500 pt-4 border-t border-gray-200">
                Created: {{ stat.quiz.created_at.strftime('%Y-%m-%d %H:%M') }}
            </div>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card p-12 text-center">
        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
        </svg>
        <p class="text-gray-600 text-lg mb-2">No quizzes created yet.</p>
        <p class="text-gray-500 text-sm mb-6">Get started by creating your first coding quiz.</p>
        <a href="{{ url_for('teacher.create_quiz') }}" 
           class="inline-block btn-primary">
            Create Your First Quiz
        </a>
    </div>
{% endif %}
{% endblock %}
